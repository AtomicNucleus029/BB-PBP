## BuzzerBeater文字直播分析器

### 功能

在BuzzerBeater比赛的文字直播界面（仅限简体中文），通过分析直播文字，提供比官方赛后数据统计更细分或高阶的数据：

1. 进攻端细分数据，如投篮分布（区分内线和中距离）、干扰下投篮、接球攻投篮、传球转化率；

2. 防守端数据，如干扰对方投篮；

3. 高阶数据，如真实命中率、球权使用率、助攻率、篮板率、失误率。

<img src="https://github.com/AtomicNucleus029/BB-PBP/assets/160561545/1eb98c2b-ffd9-4c65-ab46-d1a524354dc5" width = 500>

### 安装

和Buzzer Manager的脚本类似，添加BuzzerBeater_PBP_Analyzer.js至浏览器的TamperMonkey中即可（IE暂不支持）。

也可以通过[https://greasyfork.org/zh-CN/scripts/487785-buzzerbeater-pbp-analyzer](https://greasyfork.org/zh-CN/scripts/487785-buzzerbeater-pbp-analyzer)进行添加。

### 关于接球攻

投篮一共有描述模板：

1. “A在某位置出手”（没有后续）；
2. “A传球给B，B在某位置出手”；
3. “B在某位置出手”，紧接着下一句“这球是A助攻的”。

为保持各语言版本一致，在本脚本中，仅考虑情况2和情况3为接球攻，也就是传球者的名字必须出现在直播文字中。对于情况1，即便描写再像接球攻，也一律视作非接球攻处理。

根据目测，BB中的接球投比例在35%-60%左右（单场比赛）。作为参考，2023-2024赛季NBA（截至全明星赛），该数据为46%-62%（30支球队的赛季平均）。在NBA中，该数据表示为潜在助攻（传球后运球一次及以内出手数）与总出手数的比值。

大部分情况下，接球攻命中率（等于传球转化率）高于总命中率，幅度在0%-20%不等。

### 关于干扰投篮

在本脚本中，我们仅把防守人出现的情况视为干扰投篮。那么其他的投篮是否都是空位投篮呢？有可能。根据目测，BB中干扰下投篮的比例在40%-60%左右（单场比赛）。作为参考，2023~2024赛季NBA（截至全明星赛），该数据为43%-53%（30支球队的赛季平均）。NBA中干扰下投篮的定义是最近防守人的距离为0-4英尺，包含了tight和very tight，4英尺以上包括open和wide open。

大部分情况下，干扰下命中率低于总命中率，幅度在0%-20%不等。

### 球权使用率及其他高阶数据

球权使用率的计算公式为：球权使用率 = (投篮数+ 0.44 × 罚球数 + 失误数) × (球队球员总出场时间 / 5) / 该球员出场时间 × (球队投篮总数 + 0.44 × 球队罚球总数 + 球队失误总数)。这个0.44此处与NBA保持一致，描述了罚球与球权使用的关系。在BB世界中这个数不一定准。使用率在约30%以上可视为球权集中。

类似地，真实命中率的计算公式为：真实命中率 = 得分 /（投篮次数 + 罚球次数 * 0.44）/ 2。
